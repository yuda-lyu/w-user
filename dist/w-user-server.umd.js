/*!
 * w-user-server v1.0.0
 * (c) 2018-2019 yuda-lyu(semisphere)
 * Released under the MIT License.
 */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("events"),require("dayjs"),require("@hapi/hapi"),require("mongodb"),require("stream"),require("nodemailer")):"function"==typeof define&&define.amd?define(["events","dayjs","@hapi/hapi","mongodb","stream","nodemailer"],t):(e=e||self,e["w-user-server"]=t(e.events,e.dayjs,e["@hapi/hapi"],e.mongodb,e.stream,e.nodemailer))})(this,function(e,n,o,a,l,s){'use strict';var Ue=Math.min,He=Math.max;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(e,t,r,n,o,a,l){try{var s=e[a](l),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){function a(e){p(s,n,o,a,l,"next",e)}function l(e){p(s,n,o,a,l,"throw",e)}var s=e.apply(t,r);a(void 0)})}}function u(e,t){return t={exports:{}},e(t,t.exports),t.exports}function y(e,t,r,n,o,a,l){try{var s=e[a](l),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function g(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function h(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":pt&&pt in Object(e)?lt(e):ct(e)}function m(e){var t=c(e);return null!=e&&("object"==t||"function"==t)}function f(e){return!!mt&&mt in e}function b(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function x(e){var t=c(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function _(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function j(e){var t=this.__data__=new Ze(e);this.size=t.size}function w(e,t,r){var n=e[t];Vt.call(e,t)&&Ye(n,r)&&(r!==void 0||t in e)||Gt(e,t,r)}function v(e){return null!=e&&"object"==c(e)}function k(e,t){var r=c(e);return t=null==t?9007199254740991:t,!!t&&("number"==r||"symbol"!=r&&ir.test(e))&&-1<e&&0==e%1&&e<t}function S(e,t,r,n,o,a){var l=1&t,s=2&t,i;if(r&&(i=o?r(e,n,o,a):r(e)),void 0!==i)return i;if(!ut(e))return e;var c=ar(e);if(!c){var p=wn(e),d="[object Function]"==p||"[object GeneratorFunction]"==p;if(sr(e))return zr(e,l);if("[object Object]"!=p&&"[object Arguments]"!=p&&(!d||o)){if(!Vn[p])return o?e:{};i=zn(e,p,l)}else if(i=s||d?{}:Bn(e),!l)return s?Kr(e,Tr(i,e)):Gr(e,Er(i,e))}else if(i=Sn(e),!l)return Ur(e,i);a||(a=new It);var u=a.get(e);if(u)return u;a.set(e,i),Jn(e)?e.forEach(function(n){i.add(S(n,t,r,n,e,a))}):Rn(e)&&e.forEach(function(n,o){i.set(o,S(n,t,r,o,e,a))});var y=4&t?s?tn:en:s?keysIn:Lr,g=c?void 0:y(e);return Ft(g||e,function(n,o){g&&(o=n,n=e[o]),Zt(i,o,S(n,t,r,o,e,a))}),i}function M(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Bt;++t<r;)this.add(e[t])}function C(e,t,r,n,o,a){var l=1&r,s=en(e),i=s.length,c=en(t),p=c.length;if(i!=p&&!l)return!1;for(var d=i,u;d--;)if(u=s[d],l?!(u in t):!go.call(t,u))return!1;var y=a.get(e);if(y&&a.get(t))return y==t;var g=!0;a.set(e,t),a.set(t,e);for(var h=l;++d<i;){u=s[d];var m=e[u],f=t[u];if(n)var b=l?n(f,m,u,t,e,a):n(m,f,u,e,t,a);if(void 0===b?!(m===f||o(m,f,r,n,a)):!b){g=!1;break}h||(h="constructor"==u)}if(g&&!h){var x=e.constructor,_=t.constructor;x!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(g=!1)}return a["delete"](e),a["delete"](t),g}function L(e,t,r,n,o){return!(e!==t)||(null!=e&&null!=t&&(Xt(e)||Xt(t))?fo(e,t,r,n,L,o):e!==e&&t!==t)}function E(e,t,r,n){var o=r.length,a=o,l=!n;if(null==e)return!a;for(e=Object(e);o--;){var s=r[o];if(l&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){s=r[o];var i=s[0],c=e[i],p=s[1];if(!(l&&s[2])){var d=new It;if(n)var u=n(c,p,i,e,t,d);if(void 0===u?!bo(p,c,3,n,d):!u)return!1}else if(void 0===c&&!(i in e))return!1}return!0}function P(e){return"symbol"==c(e)||Xt(e)&&dt(e)=="[object Symbol]"}function O(e,t){if(ar(e))return!1;var r=c(e);return!!("number"==r||"symbol"==r||"boolean"==r||null==e||vo(e))||So.test(e)||!ko.test(e)||null!=t&&e in Object(t)}function A(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var l=e.apply(this,n);return r.cache=a.set(o,l)||a,l};return r.cache=new(A.Cache||Bt),r}function W(e){if("string"==typeof e)return e;if(ar(e))return ro(e,W)+"";if(vo(e))return Ao?Ao.call(e):"";var t=e+"";return"0"==t&&1/e==-Po?"-0":t}function N(e,t){return null!=e&&t in Object(e)}function T(e){return"function"==typeof e?e:null==e?Qn:"object"==c(e)?ar(e)?Bo(e[0],e[1]):wo(e):Ro(e)}function z(e,t,r,n,o){var a=-1,l=e.length;for(r||(r=Zo),o||(o=[]);++a<l;){var s=e[a];0<t&&r(s)?1<t?z(s,t-1,r,n,o):Jr(o,s):!n&&(o[o.length]=s)}return o}function U(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function H(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function D(e){if(Xt(e)&&!ar(e)&&!(e instanceof xa)){if(e instanceof Ca)return e;if(Pa.call(e,"__wrapped__"))return La(e)}return new Ca(e)}function B(e){var t=Ma(e),r=Oa[t];if("function"!=typeof r||!(t in xa.prototype))return!1;if(e===r)return!0;var n=wa(r);return!!n&&e===n[0]}function I(e,t,r,n,o,a,l,s,i,c){function p(){for(var f=arguments.length,b=Array(f),x=f;x--;)b[x]=arguments[x];if(g)var _=Za(p),j=fa(b,_);if(n&&(b=ha(b,n,o,g)),a&&(b=ma(b,a,l,g)),f-=j,g&&f<c){var w=$a(b,_);return Va(e,t,I,p.placeholder,r,b,w,s,i,c-f)}var v=u?r:this,k=y?v[e]:e;return f=b.length,s?b=qa(b,s):h&&1<f&&b.reverse(),d&&i<f&&(b.length=i),this&&this!==Qe&&this instanceof p&&(k=m||ya(k)),k.apply(v,b)}var d=t&128,u=t&1,y=t&2,g=t&24,h=t&512,m=y?void 0:ya(e);return p}function F(){var e=new Promise(function(){t=arguments[0],r=arguments[1]}),t,r;return e.resolve=t,e.reject=r,e}function R(e){var t=Object.prototype.toString.call(e);return"[object String]"===t}function Y(e){return!!(R(e)&&""!==e)}function G(e){var t=Object.prototype.toString.call(e);return"[object Number]"===t}function J(e){var t=!1;return Y(e)?t=!isNaN(+e):G(e)&&(t=!0),t}function V(e){if(!J(e))return 0;var t=cl(e);return t}function Z(e){return!!J(e)&&(e=V(e),wl(e))}function q(e){if(!J(e))return 0;e=V(e);var t=Sl(e);return"0"===t+""?0:t}function $(e){if(!Z(e))return!1;var t=0<q(e);return t}function X(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:32,t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=[],o=t.length,a;if($(e))for(a=0;a<e;a++)n[a]=t[0|Math.random()*o];else if("rfc4122"===e){n[8]=n[13]=n[18]=n[23]="-",n[14]="4";var l;for(a=0;36>a;a++)n[a]||(l=0|16*Math.random(),n[a]=t[19===a?8|3&l:l])}else return"";var s=n.join("");return s}function K(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t}function Q(e){if(K(e)){for(var t in e)return!0;return!1}return!1}function ee(e,n,t){if(!Y(e))return"";if(!Y(n))return"";if(!R(t))return"";var r=new RegExp(n,"g"),o=(e+"").replace(r,t);return o}function te(e,t){if(!Y(e))return"";if(!Q(t))return"";var r=!1;return(to(t,function(e){R(e)||(r=!0)}),r)?"":(to(t,function(t,r){e=ee(e,r,t)}),e)}function re(e,t){return!!K(e)&&!!Y(t)&&t in e}function ne(){var e=n(),t=e.format("YYYY-MM-DDTHH:mm:ssZ");return t}function oe(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t}function ae(e){var t=Object.prototype.toString.call(e);return"[object Undefined]"===t}function le(e){var t=Object.prototype.toString.call(e);return"[object Null]"===t}function se(e){if(K(e)){for(var t in e)return!1;return!0}return!1}function ie(e){return!!(R(e)&&""===e)}function ce(e){return!!oe(e)&&0===e.length}function pe(e){return!!ae(e)||!!le(e)||!!se(e)||!!ie(e)||!!ce(e)}function de(e){return!!oe(e)&&0!==e.length&&!(1===e.length&&pe(e[0]))}function ue(e,t){function r(e,t){return e.indexOf(t)}var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"anyone";if(!Y(e))return!1;if("anyone"!==o&&"all"!==o)return!1;if(R(t))if(Y(t))t=[t];else return!1;if(!de(t))return!1;var a=!1;if(to(t,function(e){Y(e)||(a=!0)}),a)return!1;var l=0;return(to(t,function(t){-1!==r(e,t)&&l++}),"anyone"===o)?0<l:"all"===o&&l===t.length}function ye(e,t){return Y(e)?$(t)?e.substr(0,t):"":""}function ge(e,t){return Y(e)?$(t)?ye(e,e.length-t):"":""}function he(e,t){if(!Y(e))return"";if(!$(t))return"";var r=e.length-t;return 0>r&&(r=0),e.substr(r,t)}function me(e){if(!Y(e))return!1;var r=he(e,6);if(!/[+|-]\d\d:\d\d/.test(r))return!1;var o=ge(e,6),t="YYYY-MM-DDTHH:mm:ss",a=n(o,t).format(t);return o===a}function fe(e){return!!Y(e)&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}function be(e){return Ol(e)}function xe(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!Y(e))return"";if(!be(t))return"";var r=Ll(e),n="";return n=t?r.toString(El):r.toString(Pl),n}function _e(e,t){return Q(e)?Y(t)?Uo(e,t,""):"":""}function je(e){if(!Y(e)&&!J(e))return"";return e+""}function we(e,t){var n=_e(e,t);return n=je(n),n}function ve(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function ke(e,t){if(Y(e))e=[e];else if(de(e));else return!1;if(Y(t))t=[t];else if(de(t));else return!1;for(var r=0;r<e.length;r++)for(var n=0;n<t.length;n++)if(e[r]===t[n])return!0;return!1}function Se(e){function t(t){var r=F();return ve(e.authenticate)?e.authenticate(t).then(function(e){r.resolve(e)}):r.resolve(!0),r}function r(){return n.apply(this,arguments)}function n(){return n=d(regeneratorRuntime.mark(function r(n){var o,a,l,s,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=we(n,"token"),r.next=3,t(o);case 3:if(a=r.sent,!a){r.next=25;break}if(l=we(n,"func"),s=_e(n,"input"),"getFuncs"!==l){r.next=15;break}if(!ve(e.filterFuncs)){r.next=12;break}return r.next=11,e.filterFuncs(o,p);case 11:p=r.sent;case 12:n={output:{sys:"sys",funcs:p}},r.next=23;break;case 15:if(!ke(p,l)){r.next=22;break}return r.next=18,e.funcs[l](s);case 18:i=r.sent,n.output=i,r.next=23;break;case 22:n.output={err:"can not find: ".concat(l)};case 23:r.next=26;break;case 25:n.output={err:"can not authenticate token: ".concat(o)};case 26:return r.abrupt("return",JSON.stringify(n));case 27:case"end":return r.stop();}},r)})),n.apply(this,arguments)}function a(t){if(ve(e.onClientChange)){var r=Tl(t,"clientId");zl(c,r)||(c=r,e.onClientChange(c,e))}}function l(){return s.apply(this,arguments)}function s(){return s=d(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.server({port:e.port,routes:{cors:!0}}),r.route(u),to(e.routes,function(e){r.route(e)}),t.next=5,r.start();case 5:console.log("Server running at: ".concat(r.info.uri));case 6:case"end":return t.stop();}},t)})),s.apply(this,arguments)}var i=[],c=[];e=qn(e),e.port||(e.port=8080),e.apiName||(e.apiName="api"),e.routes||(e.routes=[]);var p=[];re(e,"funcs")&&(p=Lr(e.funcs));var u={path:"/"+e.apiName,method:"POST",handler:function(e){var t=F(),n=X(),o=Uo(e.payload,"clientId"),l={headers:e.headers,info:e.info};i.push({clientId:o,connId:n,data:l}),a(i);var s=e.payload;return r(s).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)})["finally"](function(){i=i.filter(function(e){return e.connId!==n}),a(i)}),t}};e.serverHapi?e.serverHapi.route(u):l()}function Me(e,r){var n=F();if(!oe(e))return n.reject("rs is not array"),n;if(!ve(r))return n.reject("v is not Function"),n;var o=[];return e.reduce(function(e,n){return e.then(function(e){return o.push(e),r(n)})},Promise.resolve()).then(function(e){o.push(e),o=$l(o),n.resolve(o)})["catch"](function(e){n.reject(e)}),n}function Ce(e){function t(){return r.apply(this,arguments)}function r(){return r=d(regeneratorRuntime.mark(function t(){var r=arguments,n,o,a,l,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0<r.length&&void 0!==r[0]?r[0]:{},o=F(),t.next=4,M.connect(e.url,{useNewUrlParser:!0});case 4:return a=t.sent,l=a.db(e.db),s=l.collection(e.cl),s.find(n).toArray(function(e,t){e?o.reject(e):(t=Jo(t,function(e){return e=ql(e,"_id"),e}),o.resolve(t)),a.close()}),t.abrupt("return",o);case 9:case"end":return t.stop();}},t)})),r.apply(this,arguments)}function n(){return o.apply(this,arguments)}function o(){return o=d(regeneratorRuntime.mark(function t(r){var n,o,a,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=qn(r),n=F(),t.next=4,M.connect(e.url,{useNewUrlParser:!0});case 4:return o=t.sent,a=o.db(e.db),l=a.collection(e.cl),oe(r)||(r=[r]),r=Jo(r,function(e){return e.id||(e.id=X()),e}),l.insertMany(r,function(e,t){e?n.reject(e):0<t.insertedCount?n.resolve(t.result):n.reject(e),o.close()}),t.abrupt("return",n);case 11:case"end":return t.stop();}},t)})),o.apply(this,arguments)}function s(){return i.apply(this,arguments)}function i(){return i=d(regeneratorRuntime.mark(function t(r){var o=arguments,a,l,s,i,c,p,d,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1<o.length&&void 0!==o[1]?o[1]:{},r=qn(r),l=Uo(a,"autoInsert",!0),s=Uo(a,"atomic",!1),i=F(),t.next=7,M.connect(e.url,{useNewUrlParser:!0});case 7:return c=t.sent,p=c.db(e.db),d=p.collection(e.cl),oe(r)||(r=[r]),u=null,u=s?"findOneAndUpdate":"updateOne",Me(r,function(e){var t=F();return d[u]({id:e.id},{$set:e},function(r,o){r?t.reject(r):(o.lastErrorObject&&(o.result={n:o.lastErrorObject.n,nModified:o.lastErrorObject.updatedExisting?1:0,ok:1}),l&&0===o.result.n?n(e).then(function(e){e.nInserted=1,t.resolve(e)})["catch"](function(e){t.reject(e)}):t.resolve(o.result))}),t}).then(function(e){i.resolve(e)})["catch"](function(e){i.reject(e)})["finally"](function(){c.close()}),t.abrupt("return",i);case 15:case"end":return t.stop();}},t)})),i.apply(this,arguments)}function c(){return p.apply(this,arguments)}function p(){return p=d(regeneratorRuntime.mark(function t(r){var n,o,a,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=qn(r),n=F(),t.next=4,M.connect(e.url,{useNewUrlParser:!0});case 4:return o=t.sent,a=o.db(e.db),l=a.collection(e.cl),oe(r)||(r=[r]),Me(r,function(e){var t=F();return l.deleteOne({id:e.id},function(e,r){e?t.resolve(e):(r=r.result,r.nDeleted=1,t.resolve(r))}),t}).then(function(e){n.resolve(e)})["catch"](function(e){n.reject(e)})["finally"](function(){o.close()}),t.abrupt("return",n);case 10:case"end":return t.stop();}},t)})),p.apply(this,arguments)}function u(){return y.apply(this,arguments)}function y(){return y=d(regeneratorRuntime.mark(function t(){var r=arguments,n,o,a,l,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0<r.length&&void 0!==r[0]?r[0]:{},o=F(),t.next=4,M.connect(e.url,{useNewUrlParser:!0});case 4:return a=t.sent,l=a.db(e.db),s=l.collection(e.cl),s.deleteMany(n,function(e,t){e?o.resolve(e):(t=t.result,o.resolve(t)),a.close()}),t.abrupt("return",o);case 9:case"end":return t.stop();}},t)})),y.apply(this,arguments)}function g(){return h.apply(this,arguments)}function h(){return h=d(regeneratorRuntime.mark(function t(r){var n,o,s,i,c,p,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=F(),o=X(),s=Buffer.from(r),t.next=5,M.connect(e.url,{useNewUrlParser:!0});case 5:return i=t.sent,c=i.db(e.db),p=new a.GridFSBucket(c,{chunkSizeBytes:10485760,bucketName:e.cl}),d=new l.Readable,d._read=function(){},d.push(s),d.push(null),d.pipe(p.openUploadStream(o)).on("error",function(e){n.reject(e),i.close()}).on("finish",function(){n.resolve({n:1,ok:1,id:o}),i.close()}),t.abrupt("return",n);case 14:case"end":return t.stop();}},t)})),h.apply(this,arguments)}function m(){return f.apply(this,arguments)}function f(){return f=d(regeneratorRuntime.mark(function t(r){var n,o,l,s,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=F(),t.next=3,M.connect(e.url,{useNewUrlParser:!0});case 3:return o=t.sent,l=o.db(e.db),s=new a.GridFSBucket(l,{chunkSizeBytes:10485760,bucketName:e.cl}),i=Buffer.from(""),c=s.openDownloadStreamByName(r),c.on("data",function(e){i=Buffer.concat([i,e])}),c.on("error",function(e){n.reject(e),o.close()}),c.on("end",function(){var e=new Uint8Array(i);i=null,n.resolve(e),o.close()}),t.abrupt("return",n);case 12:case"end":return t.stop();}},t)})),f.apply(this,arguments)}function b(){return x.apply(this,arguments)}function x(){return x=d(regeneratorRuntime.mark(function t(){var r=arguments,n,o,l,s,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:{},o=1<r.length&&void 0!==r[1]?r[1]:null,l=F(),null!==o){t.next=9;break}return t.next=6,M.connect(e.url,{useNewUrlParser:!0});case 6:s=t.sent,i=s.db(e.db),o=new a.GridFSBucket(i,{chunkSizeBytes:10485760,bucketName:e.cl});case 9:return o.find(n).toArray(function(e,t){e?l.reject(e):l.resolve(t)}),t.abrupt("return",l);case 11:case"end":return t.stop();}},t)})),x.apply(this,arguments)}function _(){return j.apply(this,arguments)}function j(){return j=d(regeneratorRuntime.mark(function t(r){var n,o,l,s,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=F(),t.next=3,M.connect(e.url,{useNewUrlParser:!0});case 3:return o=t.sent,l=o.db(e.db),s=new a.GridFSBucket(l,{chunkSizeBytes:10485760,bucketName:e.cl}),t.next=8,b({filename:r},s);case 8:return i=t.sent,0===i.length?(n.reject("can not find id"),o.close()):1<i.length?(n.reject("duplicate id"),o.close()):(c=i[0]._id,s["delete"](c,function(e){e?n.reject(e):n.resolve({n:1,nDeleted:1,ok:1}),o.close()})),t.abrupt("return",n);case 11:case"end":return t.stop();}},t)})),j.apply(this,arguments)}function w(){return v.apply(this,arguments)}function v(){return v=d(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=F(),r["delete"](t,function(e){e?n.reject(e):n.resolve({n:1,nDeleted:1,ok:1})}),e.abrupt("return",n);case 3:case"end":return e.stop();}},e)})),v.apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return S=d(regeneratorRuntime.mark(function t(){var r=arguments,n,o,l,s,i,c,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0<r.length&&void 0!==r[0]?r[0]:{},o=F(),t.next=4,M.connect(e.url,{useNewUrlParser:!0});case 4:return l=t.sent,s=l.db(e.db),i=new a.GridFSBucket(s,{chunkSizeBytes:10485760,bucketName:e.cl}),t.next=9,b(n,i);case 9:return c=t.sent,p=Jo(c,function(e){var t=e._id;return w(t,i)}),Promise.all(p).then(function(){o.resolve({n:c.length,ok:1})})["catch"](function(e){o.reject(e)})["finally"](function(){l.close()}),t.abrupt("return",o);case 13:case"end":return t.stop();}},t)})),S.apply(this,arguments)}e.url||(e.url="mongodb://127.0.0.1:27017"),e.db||(e.db="worm"),e.cl||(e.cl="test");var M=a.MongoClient;return{select:t,insert:n,save:s,del:c,delAll:u,selectGfs:m,insertGfs:g,delGfs:_,delAllGfs:k}}function Le(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=F(),r=Uo(e,"srcName","system by w-email"),n=Uo(e,"srcEmail","");if(!fe(n))return t.reject("srcEmail is not email"),t;var o=Uo(e,"srcPW",""),a=Uo(e,"srcHost","smtp.gmail.com"),l=Uo(e,"srcPort",587),i=Uo(e,"emTitle",""),c=Uo(e,"emContent",""),p=Uo(e,"emAttachments",[]);K(p)&&(p=[p]);var d=Uo(e,"toEmails",[]);R(d)&&(d=[d]);var u=Uo(e,"toEmailsCC",[]);R(u)&&(u=[u]);var y=Uo(e,"toEmailsBCC",[]);R(y)&&(y=[y]);var g=s.createTransport({host:a,secureConnecton:!0,port:l,auth:{user:n,pass:o}}),h={from:"".concat(r," <").concat(n,">"),to:d.join(","),cc:u.join(","),bcc:y.join(","),subject:i,html:c,attachments:p};return g.sendMail(h,function(e,r){e?t.reject(e):t.resolve(r.response)}),t}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pe(e){for(var t=1,r;t<arguments.length;t++)r=null==arguments[t]?{}:arguments[t],t%2?Ee(r,!0).forEach(function(t){De(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))});return e}function Oe(e){return e.format("YYYY-MM-DDTHH:mm:ssZ")}function Ae(e){return n(e,"YYYY-MM-DDTHH:mm:ssZ")}function We(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;return{state:"success",msg:e}}function Ne(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;return{state:"error",msg:e}}function Te(e){return gl(e,function(e){for(var t=F(),r=arguments.length,n=Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e.apply(void 0,n).then(function(e){t.resolve(We(e))})["catch"](function(e){t.resolve(Ne(e))}),t})}function ze(){function t(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];setTimeout(function(){B.emit.apply(B,[e].concat(r)),B.emit("all",{eventName:e,data:[].concat(r)})},1)}function r(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return gl(e,function(e){function n(e){r&&t(r,{input:[].concat(a),output:e})}for(var o=arguments.length,a=Array(1<o?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];var s=F();return e.apply(void 0,a).then(function(e){n(e),s.resolve(e)})["catch"](function(e){n(e),s.resolve(e)}),s})}function o(r,n){if(re(G,r)){var o=G[r].type,t=G[r].exclude;return"String"===o?R(n)?ue(n,t)?Ne("can not contain special characters: \"<\" or \">\""):We():Ne("value is not string: "+n):"Object"===o?K(n)?We():Ne("value is not object: "+n):Ne("type is not defined: "+o)}return Ne("invalid key: "+r)}function a(e){return to(e,function(e,t){var n=o(t,e);if("error"===n.state)return n}),We()}function l(e){return to(G,function(t,r){var n="";"Object"===t.type&&(n={}),re(e,r)?(null===e[r]||void 0===e[r])&&(e[r]=n):e[r]=n}),e}function s(){return i.apply(this,arguments)}function i(){return i=Re(Fe.mark(function e(t){var n,o,a,l;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,o=t.find,a=F(),l=null,e.next=5,ie(n);case 5:if(l=e.sent,"error"!==l.state){e.next=9;break}return a.reject(l.msg),e.abrupt("return",a);case 9:return I.select(o).then(function(e){if(1<=e.length){var t=e,r=[];to(G,function(e,t){e["public"]&&r.push(t)}),t=Jo(t,function(e){return jl(e,r)}),a.resolve(t)}else a.reject("can not find user")})["catch"](function(e){console.log("selectPublic catch:",e,"find:",o),a.reject("error")}),e.abrupt("return",a);case 11:case"end":return e.stop();}},e)})),i.apply(this,arguments)}function c(){return p.apply(this,arguments)}function p(){return p=Re(Fe.mark(function e(t){var n,o,s;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=F(),o=null,Y(t.pwEnc)){e.next=5;break}return n.reject("invalid password"),e.abrupt("return",n);case 5:if(fe(t.email)){e.next=8;break}return n.reject("invalid email"),e.abrupt("return",n);case 8:return e.next=10,u({email:t.email});case 10:if(s=e.sent,!s){e.next=14;break}return n.reject("email has been used"),e.abrupt("return",n);case 14:if(o=a(t),"error"!==o.state){e.next=18;break}return n.reject(o.msg),e.abrupt("return",n);case 18:return t=l(t),t.id=X(),""!==D.salt&&(t.pwEnc=xe(t.pwEnc+D.salt)),t.checkCode=X(),t.timeCreate=ne(),t.role=Xl.roleGeneral,t.active=Kl.activeYes,I.insert(t).then(function(){n.resolve({id:t.id,checkCode:t.checkCode})})["catch"](function(e){console.log("insert catch:",e,"user:",t),n.reject("error")}),e.abrupt("return",n);case 27:case"end":return e.stop();}},e)})),p.apply(this,arguments)}function d(e){var t=F();return I.select(e).then(function(e){1===e.length?t.resolve(e[0]):1<e.length?t.reject("find ".concat(e.length," users")):t.reject("can not find user")})["catch"](function(r){console.log("selectOne catch:",r,"find:",e),t.reject("error")}),t}function u(e){var t=F();return Q(e)?(I.select(e).then(function(e){1<=e.length?t.resolve(!0):t.resolve(!1)})["catch"](function(r){console.log("select catch:",r,"find:",e),t.reject("error")}),t):(t.reject("invalid find"),t)}function y(){return g.apply(this,arguments)}function g(){return g=Re(Fe.mark(function e(t){var n,o,a,l,s;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=F(),o=null,e.next=4,Z(t);case 4:if(o=e.sent,"error"!==o.state){e.next=8;break}return n.reject(o.msg),e.abrupt("return",n);case 8:return a=o.msg.id,t.id=a,l=o.msg.checkCode,t.checkCode=l,s="".concat(D.authUrl,"?checkCode=").concat(l),e.next=15,ge(t.name,s,t.email);case 15:if(o=e.sent,"error"!==o.state){e.next=20;break}return console.log("signUp catch:",o.msg,"emailObj:",{name:t.name,urlCheckCode:s,email:t.email}),n.reject("can not send email"),e.abrupt("return",n);case 20:return n.resolve(t.id),e.abrupt("return",n);case 22:case"end":return e.stop();}},e)})),g.apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return m=Re(Fe.mark(function e(t){var o,a,l,s,i,c,p,d;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.email,a=t.pwEnc,l=F(),s=null,Y(o)){e.next=6;break}return l.reject("invalid email"),e.abrupt("return",l);case 6:if(Y(a)){e.next=9;break}return l.reject("invalid password"),e.abrupt("return",l);case 9:return i={email:o},e.next=12,q(i);case 12:if(s=e.sent,"error"!==s.state){e.next=17;break}return console.log("logIn catch:",s.msg,"find:",i),l.reject("email or password is incorrect"),e.abrupt("return",l);case 17:if(c=s.msg,""===c.checkCode){e.next=21;break}return l.reject("account is not verified"),e.abrupt("return",l);case 21:if(""!==D.salt&&(a=xe(a+D.salt)),c.pwEnc===a){e.next=25;break}return l.reject("email or password is incorrect"),e.abrupt("return",l);case 25:if(c.active===Kl.activeYes){e.next=28;break}return l.reject("account is suspended"),e.abrupt("return",l);case 28:return e.next=30,ie(c.token);case 30:if(s=e.sent,"success"!==s.state){e.next=34;break}return l.resolve(c.token),e.abrupt("return",l);case 34:return p=X(),d={id:c.id,token:p,tokenExp:Oe(n().add(D.timeTokenExp,"minute")),timeLogin:ne()},e.next=38,J(d);case 38:if(s=e.sent,"error"!==s.state){e.next=43;break}return console.log("logIn catch:",s.msg,"userModify:",d),l.reject("can not save token"),e.abrupt("return",l);case 43:return l.resolve(p),e.abrupt("return",l);case 45:case"end":return e.stop();}},e)})),m.apply(this,arguments)}function f(){return b.apply(this,arguments)}function b(){return b=Re(Fe.mark(function e(t){var n,o,a,l,s;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=F(),o=null,Y(t)){e.next=5;break}return n.reject("invalid token"),e.abrupt("return",n);case 5:return a={token:t},e.next=8,q(a);case 8:if(o=e.sent,"error"!==o.state){e.next=13;break}return console.log("logOut catch:",o.msg,"find:",a),n.reject("invalid token"),e.abrupt("return",n);case 13:return l=o.msg,s={id:l.id,token:"",tokenExp:""},e.next=17,J(s);case 17:if(o=e.sent,"error"!==o.state){e.next=22;break}return console.log("logOut catch:",o.msg,"userModify:",s),n.reject("can not update token"),e.abrupt("return",n);case 22:return n.resolve("success"),e.abrupt("return",n);case 24:case"end":return e.stop();}},e)})),b.apply(this,arguments)}function x(e){var t=F();if(!Y(e))return t.reject(D.verifyWebMsgExpired),t;var r={checkCode:e};return d(r).then(function(e){var t={id:e.id,checkCode:""};return I.save(t)}).then(function(){t.resolve(D.verifyWebMsgSuccess)})["catch"](function(e){console.log("verifyCheckCode catch:",e,"find:",r),t.reject(D.verifyWebMsgExpired)}),t}function _(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"false",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",n=D.verifyWebHtml;return n=te("<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>",{"{rdWebName}":D.webName,"{rdWebDescription}":D.webDescription,"{rdWebUrl}":D.webUrl,"{rdLogo}":D.verifyWebLogo,"{rdMessage}":e,"{rdCountdown}":t,"{rdCountdownMessage}":r}),"<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>"}function j(e){var r=F(),n=D.verifyWebMsgCount;return x(e).then(function(o){t("verifyCheckCodeAndGetHtml",{state:"success",msg:o,checkCode:e}),r.resolve(_(o,"true",n))})["catch"](function(n){t("verifyCheckCodeAndGetHtml",{state:"error",msg:n,checkCode:e}),r.resolve(_(n,"false",""))}),r}function w(e){var t=F();if(!me(e))t.reject("no expire time for token");else{var r=n(),o=Ae(e),a=o.diff(r,"minute");0<a?t.resolve("success"):a>D.timeTokenExp?(console.log("verifyTokenExp error:","iMinutes="+a,">","timeTokenExp="+D.timeTokenExp),t.reject("invalid tokenExp")):t.reject("token expired")}return t}function v(){return k.apply(this,arguments)}function k(){return k=Re(Fe.mark(function e(t){var n,o,a,l;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=F(),o=null,Y(t)){e.next=5;break}return n.reject("invalid token"),e.abrupt("return",n);case 5:return a={token:t},e.next=8,q(a);case 8:if(o=e.sent,"error"!==o.state){e.next=13;break}return console.log("isValidToken catch:",o.msg,"find:",a),n.reject("invalid token"),e.abrupt("return",n);case 13:if(l=o.msg,o=se(l.tokenExp),"error"!==o.state){e.next=18;break}return n.reject(o.msg),e.abrupt("return",n);case 18:return n.resolve("success"),e.abrupt("return",n);case 20:case"end":return e.stop();}},e)})),k.apply(this,arguments)}function S(){return M.apply(this,arguments)}function M(){return M=Re(Fe.mark(function e(t){var o,a,l,s,i;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=F(),a=null,Y(t)){e.next=5;break}return o.reject("invalid token"),e.abrupt("return",o);case 5:return l={token:t},e.next=8,q(l);case 8:if(a=e.sent,"error"!==a.state){e.next=13;break}return console.log("refreshTokenExp catch:",a.msg,"find:",l),o.reject("invalid token"),e.abrupt("return",o);case 13:if(s=a.msg,a=w(s.tokenExp),"error"!==a.state){e.next=18;break}return o.reject(a.err),e.abrupt("return",o);case 18:return i={id:s.id,tokenExp:Oe(n().add(D.timeTokenExp,"minute"))},e.next=21,J(i);case 21:if(a=e.sent,"error"!==a.state){e.next=26;break}return console.log("refreshTokenExp catch:",a.msg,"userModify:",i),o.reject("can not update token"),e.abrupt("return",o);case 26:return o.resolve("success"),e.abrupt("return",o);case 28:case"end":return e.stop();}},e)})),M.apply(this,arguments)}function C(){return L.apply(this,arguments)}function L(){return L=Re(Fe.mark(function e(t){var n,o,a,l;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=F(),o=null,a={token:t},e.next=5,q(a);case 5:if(o=e.sent,"error"!==o.state){e.next=10;break}return console.log("getUserFromToken catch:",o.msg,"find:",a),n.reject("invalid token"),e.abrupt("return",n);case 10:return l=o.msg,n.resolve(l),e.abrupt("return",n);case 13:case"end":return e.stop();}},e)})),L.apply(this,arguments)}function E(){return P.apply(this,arguments)}function P(){return P=Re(Fe.mark(function e(t){var n,o,a,l,s,i,c,p;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,o=t.pwEnc,a=t.pwEncNew,l=F(),s=null,Y(n)){e.next=6;break}return l.reject("invalid email"),e.abrupt("return",l);case 6:if(Y(o)){e.next=9;break}return l.reject("invalid old password"),e.abrupt("return",l);case 9:if(Y(a)){e.next=12;break}return l.reject("invalid new password"),e.abrupt("return",l);case 12:return i={email:n},e.next=15,q(i);case 15:if(s=e.sent,"error"!==s.state){e.next=20;break}return console.log("changePW catch:",s.msg,"find:",i),l.reject("email or password is incorrect"),e.abrupt("return",l);case 20:if(c=s.msg,""===c.checkCode){e.next=24;break}return l.reject("account is not verified"),e.abrupt("return",l);case 24:if(c.active===Kl.activeYes){e.next=27;break}return l.reject("account is suspended"),e.abrupt("return",l);case 27:if(""!==D.salt&&(o=xe(o+D.salt),a=xe(a+D.salt)),c.pwEnc===o){e.next=31;break}return l.reject("email or password is incorrect"),e.abrupt("return",l);case 31:return p={id:c.id,pwEnc:a},e.next=34,J(p);case 34:if(s=e.sent,"error"!==s.state){e.next=39;break}return console.log("changePW catch:",s.msg,"userModify:",p),l.reject("can not update password"),e.abrupt("return",l);case 39:return l.resolve("success"),e.abrupt("return",l);case 41:case"end":return e.stop();}},e)})),P.apply(this,arguments)}function O(){return A.apply(this,arguments)}function A(){return A=Re(Fe.mark(function e(t){var n,o,a,l,s,i,c,p,d;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,o=t.pwEncNew,a=F(),l=null,Y(n)){e.next=6;break}return a.reject("invalid email"),e.abrupt("return",a);case 6:if(Y(o)){e.next=9;break}return a.reject("invalid new password"),e.abrupt("return",a);case 9:return s={email:n},e.next=12,q(s);case 12:if(l=e.sent,"error"!==l.state){e.next=17;break}return console.log("resetPW catch:",l.msg,"find:",s),a.reject("email is incorrect"),e.abrupt("return",a);case 17:if(i=l.msg,i.active===Kl.activeYes){e.next=21;break}return a.reject("account is suspended"),e.abrupt("return",a);case 21:return""!==D.salt&&(o=xe(o+D.salt)),c=X(),p={id:i.id,pwEnc:o,checkCode:c},e.next=26,J(p);case 26:if(l=e.sent,"error"!==l.state){e.next=31;break}return console.log("resetPW catch:",l.msg,"userModify:",p),a.reject("can not update password"),e.abrupt("return",a);case 31:return d="".concat(D.authUrl,"?checkCode=").concat(c),e.next=34,he(i.name,d,i.email);case 34:if(l=e.sent,"error"!==l.state){e.next=39;break}return console.log("resetPW catch:",l.msg,"emailObj:",{name:i.name,urlCheckCode:d,email:i.email}),a.reject("can not send email"),e.abrupt("return",a);case 39:return a.resolve("success"),e.abrupt("return",a);case 41:case"end":return e.stop();}},e)})),A.apply(this,arguments)}function W(){return N.apply(this,arguments)}function N(){return N=Re(Fe.mark(function e(t){var n,o,l,s,i,c,p;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,o=t.user,l=F(),s=null,e.next=5,ie(n);case 5:if(s=e.sent,"error"!==s.state){e.next=9;break}return l.reject(s.msg),e.abrupt("return",l);case 9:if(s=a(o),"error"!==s.state){e.next=13;break}return l.reject(s.msg),e.abrupt("return",l);case 13:return e.next=15,C(n);case 15:if(i=e.sent,c={id:i.id},p=!1,to(G,function(e,t){e.canModify&&o[t]&&i[t]!==o[t]&&(p=!0,c[t]=o[t])}),p){e.next=22;break}return l.resolve("no change"),e.abrupt("return",l);case 22:return e.next=24,J(c);case 24:if(s=e.sent,"error"!==s.state){e.next=29;break}return console.log("modifyInfor catch:",s.msg,"userModify:",c),l.reject("can not modify"),e.abrupt("return",l);case 29:return l.resolve("success"),e.abrupt("return",l);case 31:case"end":return e.stop();}},e)})),N.apply(this,arguments)}function T(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],a={srcName:D.emSenderName,srcEmail:D.emSenderEmail,srcPW:D.emSenderPW,emTitle:e,emContent:t,toEmails:r,toEmailsCC:n,toEmailsBCC:o};return new Le(a)}function z(e,t,r,n,o){var a=D.emLetterHtml,l=D.webName,s=D.webUrl,i=D.emLetterLinks;return""!==l&&""!==s&&(i=$o({name:l,url:s},i)),i=Jo(i,function(e){var t=Uo(e,"name",""),r=Uo(e,"url","");return"<a style=\"text-decoration:none\" href=\"".concat(r,"\" target=\"_blank\" >").concat(t,"</a>")}),i="| ".concat(Qo(i," | ")," |"),a=te(a,{"{emMessage}":t,"{emWebName}":l,"{emWebUrl}":s,"{emWebDescription}":D.webDescription,"{emLetterDoNotReplayMessage}":D.emLetterDoNotReplayMessage,"{emLetterTeamMessage}":D.emLetterTeamMessage,"{emLetterLinks}":i}),T(e,a,r,n,o)}function U(e,t,r){var n=D.emSignUpTitle,o=D.emSignUpHtml;return o=te("<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>",{"{name}":e,"{urlCheckCode}":t}),z(n,"<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>",r,[],D.emBCC)}function H(e,t,r){var n=D.emResetPWTitle,o=D.emResetPWHtml;return o=te("<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>",{"{name}":e,"{urlCheckCode}":t}),z(n,"<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>",r,[],D.emBCC)}var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},B=new e.EventEmitter;if(D=qn(D),Y(D.mongoUrl)||(D.mongoUrl="mongodb://127.0.0.1:27017"),Y(D.mongoDb)||(D.mongoDb="wuser"),Y(D.mongoCl)||(D.mongoCl="users"),$(D.port)||(D.port=8080),Y(D.apiName)||(D.apiName="api"),Y(D.authUrl)||(D.authUrl="http://localhost:8080/auth"),Y(D.salt)||(D.salt=""),$(D.timeTokenExp)||(D.timeTokenExp=30),Y(D.webName)||(D.webName=""),Y(D.webUrl)||(D.webUrl=""),Y(D.webDescription)||(D.webDescription=""),Y(D.emSenderName)||(D.emSenderName="WUserServer"),!Y(D.emSenderEmail))return console.log("invalid emSenderEmail"),B;Y(D.emSenderPW)||(D.emSenderPW=""),Y(D.emBCC)||(D.emBCC=""),Y(D.emLetterHtml)||(D.emLetterHtml="<table style=\"width:100%;\">\n<tbody>\n\n<tr style=\"display:none;\">\n    <td>\n        {emMessage}\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:30px; font-family:'Microsoft JhengHei'; background-color:#666; text-align:center;\">\n        <a style=\"color:#aaffff; font-size:24pt; text-decoration:none;\" href=\"{emWebUrl}\" target=\"_blank\">{emWebName}</a>\n        <p style=\"margin:10px 0px 0px 0px; color:#eee; font-size:12pt;\">\n            {emWebDescription}\n        </p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei';\">\n        <p style=\"\">{emMessage}</p>\n    </td>\n</tr>\n\n<tr>\n    <td style=\"padding:20px; font-family:'Microsoft JhengHei'; background-color:#f5f5f5; text-align:center;\">\n        <p style=\"color:#f26; font-size:11pt;\">\u3010{emLetterDoNotReplayMessage}\u3011</p>\n        <p style=\"\">{emLetterTeamMessage}</p>\n        <p style=\"padding:1em 0px 0px 0px; color:#aaa;\">{emLetterLinks}</p>\n    </td>\n</tr>\n\n</tbody>\n</table>"),Y(D.emLetterTeamMessage)||(D.emLetterTeamMessage="Global-User International Company"),Y(D.emLetterDoNotReplayMessage)||(D.emLetterDoNotReplayMessage="This letter is automatically sent by the system, please do not reply to this email."),oe(D.emLetterLinks)||(D.emLetterLinks=[]),Y(D.emSignUpTitle)||(D.emSignUpTitle="Verification letter"),Y(D.emSignUpHtml)||(D.emSignUpHtml="<p>Dear {name} :</p>\n\n<p>Your registration request has been received. Please click the link below to verify your account.</p>\n\n<p><a href=\"{urlCheckCode}\" target=\"_blank\">Confirm Account</a></p>"),Y(D.emResetPWTitle)||(D.emResetPWTitle="Password reset letter"),Y(D.emResetPWHtml)||(D.emResetPWHtml="<p>Dear {name} :</p>\n\n<p>You have received your change password request. Please click the link below to verify your account.</p>\n\n<p><a href=\"{urlCheckCode}\" target=\"_blank\">Confirm Account</a></p>"),Y(D.verifyWebHtml)||(D.verifyWebHtml="<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"zh-tw\">\n\n    <head>\n        <meta http-equiv=\"content-type\" content=\"text/html charset=UTF-8\" />\n        <title>{rdWebName}</title>\n\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.slim.js\"></script>\n\n    </head>\n\n    <body style=\"padding:0; margin:0;\">\n    \n        <div style=\"display:flex; align-items:center; justify-content:center;\">\n            \n            <div style=\"padding:30px; font-family:'Microsoft JhengHei';\">\n            \n                <div style=\"margin:10px 0px 20px 0px; display:flex; align-items:center;\">\n\n                    <div style=\"margin-right:10px;\">\n                        {rdLogo}\n                    </div>\n\n                    <div style=\"margin:-5px 0px 0px 0px;\">\n                        <div style=\"margin:0px 0px 0px 0px; font-size:12pt; color:#999;\">Single Sign-On</div>\n                        <div style=\"margin:-3px 0px 0px 0px; font-size:24pt;\">{rdWebName}</div>\n                    </div>\n\n                </div>\n    \n                <div style=\"padding:20px; text-align:center; background-color:#fee; border-radius:10px;\">\n\n                    <div style=\"\">{rdMessage}</div>\n    \n                    <div id=\"cd\" style=\"margin:10px 0px 0px 0px; font-size:10pt; color:#999; display:none;\"></div>\n\n                </div>\n                \n            </div>\n            \n        </div>\n        \n        <script>\n\n            function countdown() {\n                $('#cd').show()\n                let n = 5\n                let tmp = '{rdCountdownMessage}'\n                $('#cd').text(tmp.replace('{s}', n))\n                setInterval(function() {\n                    n -= 1\n                    if (n<=0) {\n                        window.location.href = '{rdWebUrl}'\n                    }\n                    $('#cd').text(tmp.replace('{s}', n))\n                }, 1000)\n            }\n            if ({rdCountdown}) {\n                countdown()\n            }\n\n        </script>\n\n    </body>\n\n</html>"),Y(D.verifyWebLogo)||(D.verifyWebLogo="<svg width=\"64\" height=\"64\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\"><defs><style>.cls-1{fill:#c8da52;}.cls-2{fill:#995f5b;}</style></defs><title/><path class=\"cls-1\" d=\"M23.85,38.78c9.63-2,15,2.07,16.22,8.17S38,58.88,28.4,60.86,5.33,54.71,5.21,54.13,14.23,40.76,23.85,38.78Z\"/><path class=\"cls-1\" d=\"M45.72,18.87C51.31,27,49.66,33.45,44.54,37s-11.78,2.78-17.36-5.3S23.83,8,24.31,7.7,40.14,10.78,45.72,18.87Z\"/><path class=\"cls-1\" d=\"M72.6,31.21c-5.26,8.3-11.88,9.33-17.14,6s-7.16-9.75-1.9-18.05,20.45-12.32,21-12S77.86,22.91,72.6,31.21Z\"/><path class=\"cls-1\" d=\"M71.73,60.78c-9.69-1.6-13.22-7.3-12.21-13.44s6.19-10.4,15.88-8.8,19.33,14,19.24,14.59S81.43,62.38,71.73,60.78Z\"/><path class=\"cls-2\" d=\"M57.46,43.08a1,1,0,0,0-1.41-1.41l-6.22,6.21-6.21-6.21a1,1,0,0,0-1.41,1.41l6.62,6.63v5.08l-5.21-5.21A1,1,0,1,0,42.21,51l6.62,6.63V93.78a1,1,0,0,0,2,0V57.62L57.46,51a1,1,0,0,0-1.41-1.41l-5.22,5.21V49.71Z\"/><path class=\"cls-2\" d=\"M75.86,78.39a1,1,0,0,0-1,1V93.78a1,1,0,0,0,2,0V79.39A1,1,0,0,0,75.86,78.39Z\"/><path class=\"cls-1\" d=\"M65.37,77.4c3.88-.8,6,.83,6.53,3.28s-.83,4.8-4.7,5.6-9.28-2.48-9.32-2.71S61.5,78.2,65.37,77.4Z\"/><path class=\"cls-1\" d=\"M74.17,69.39c2.25,3.25,1.58,5.86-.48,7.29s-4.73,1.11-7-2.14S65.36,65,65.56,64.9,71.92,66.14,74.17,69.39Z\"/><path class=\"cls-1\" d=\"M85,74.35c-2.11,3.34-4.78,3.75-6.89,2.41s-2.88-3.92-.77-7.26,8.23-5,8.43-4.83S87.1,71,85,74.35Z\"/><path class=\"cls-1\" d=\"M84.63,86.25c-3.9-.65-5.32-2.94-4.91-5.41s2.49-4.18,6.39-3.54,7.78,5.64,7.74,5.87S88.53,86.89,84.63,86.25Z\"/></svg>"),Y(D.verifyWebMsgSuccess)||(D.verifyWebMsgSuccess="Verify successfully"),Y(D.verifyWebMsgExpired)||(D.verifyWebMsgExpired="Code has expired"),Y(D.verifyWebMsgCount)||(D.verifyWebMsgCount="Go to the website automatically after {s} seconds..."),K(D.funcs)||(D.funcs={}),oe(D.routes)||(D.routes=[]);var I=Ce({url:D.mongoUrl,db:D.mongoDb,cl:D.mongoCl}),G={id:{type:"String",public:!0,necessary:!0,exclude:[],canModify:!1},name:{type:"String",public:!0,necessary:!1,exclude:Ql,canModify:!0},pwEnc:{type:"String",public:!1,necessary:!0,exclude:[],canModify:!1},email:{type:"String",public:!0,necessary:!0,exclude:Ql,canModify:!0},address:{type:"String",public:!0,necessary:!1,exclude:Ql,canModify:!0},phone:{type:"String",public:!0,necessary:!1,exclude:Ql,canModify:!0},organization:{type:"String",public:!0,necessary:!1,exclude:Ql,canModify:!0},position:{type:"String",public:!0,necessary:!1,exclude:Ql,canModify:!0},role:{type:"String",public:!0,necessary:!0,exclude:Ql,canModify:!1},checkCode:{type:"String",public:!1,necessary:!1,exclude:[],canModify:!1},token:{type:"String",public:!1,necessary:!1,exclude:[],canModify:!1},tokenExp:{type:"String",public:!1,necessary:!1,exclude:[],canModify:!1},timeCreate:{type:"String",public:!1,necessary:!0,exclude:[],canModify:!1},timeLogin:{type:"String",public:!1,necessary:!1,exclude:[],canModify:!1},data:{type:"Object",public:!1,necessary:!1,exclude:[],canModify:!1},active:{type:"String",public:!1,necessary:!0,exclude:[],canModify:!1}},J=Te(I.save),V=Te(s),Z=Te(c),q=Te(d),ee=Te(y),ae=Te(h),le=Te(f),se=Te(w),ie=Te(v),ce=Te(S),pe=Te(E),de=Te(O),ye=Te(W),ge=Te(U),he=Te(H),be={select:function(e){return r(V,"selectPublic")(e)},signUp:function(e){return r(ee,"signUp")(e)},logIn:function(e){return r(ae,"logIn")(e)},refreshTokenExp:function(e){return r(ce,"refreshTokenExp")(e)},isValidToken:function(e){return r(ie,"isValidToken")(e)},logOut:function(e){return r(le,"logOut")(e)},changePW:function(e){return r(pe,"changePW")(e)},resetPW:function(e){return r(de,"resetPW")(e)},modifyInfor:function(e){return r(ye,"modifyInfor")(e)}};to(D.funcs,function(e,t){re(be,t)?console.log("invalid func: "+t):be[t]=D.funcs[t]});var _e=[{method:"GET",path:"/auth",handler:function(){var e=Re(Fe.mark(function e(t){var r;return Fe.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query.checkCode,e.abrupt("return",j(r));case 2:case"end":return e.stop();}},e)}));return function(){return e.apply(this,arguments)}}()}];return to(D.routes,function(e){_e.push(e)}),D=Pe({},D,{onClientChange:function(e){t("clientChange",e.length,e)},funcs:be,routes:_e}),new Se(D),B}e=e&&e.hasOwnProperty("default")?e["default"]:e,n=n&&n.hasOwnProperty("default")?n["default"]:n,o=o&&o.hasOwnProperty("default")?o["default"]:o,a=a&&a.hasOwnProperty("default")?a["default"]:a,l=l&&l.hasOwnProperty("default")?l["default"]:l,s=s&&s.hasOwnProperty("default")?s["default"]:s;var De=i,Be="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,Ie=u(function(e){var t=function(e){function t(e,t,r,o){var a=t&&t.prototype instanceof n?t:n,l=Object.create(a.prototype),s=new y(o||[]);return l._invoke=i(e,r,s),l}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function a(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,o,a,l){var s=r(e[n],e,o);if("throw"===s.type)l(s.arg);else{var i=s.arg,p=i.value;return p&&"object"===c(p)&&f.call(p,"__await")?Promise.resolve(p.__await).then(function(e){t("next",e,a,l)},function(e){t("throw",e,a,l)}):Promise.resolve(p).then(function(e){i.value=e,a(i)},function(e){return t("throw",e,a,l)})}}function n(e,r){function n(){return new Promise(function(n,o){t(e,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=n}function i(e,t,n){var o="suspendedStart";return function(a,l){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===a)throw l;return h()}for(n.method=a,n.arg=l;;){var s=n.delegate;if(s){var i=p(s,n);if(i){if(i===v)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=r(e,t,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}function p(e,t){var n=e.iterator[t.method];if(n===w){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=w,p(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,v;var a=o.arg;if(!a)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v;if(a.done)t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=w);else return a;return t.delegate=null,v}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function y(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function g(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(f.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=w,t.done=!0,t};return n.next=n}}return{next:h}}function h(){return{value:w,done:!0}}var m=Object.prototype,f=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",j=b.toStringTag||"@@toStringTag",w;e.wrap=t;var v={},k={};k[x]=function(){return this};var S=Object.getPrototypeOf,M=S&&S(S(g([])));M&&M!==m&&f.call(M,x)&&(k=M);var C=a.prototype=n.prototype=Object.create(k);return o.prototype=C.constructor=a,a.constructor=o,a[j]=o.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,!(j in e)&&(e[j]="GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[_]=function(){return this},e.AsyncIterator=s,e.async=function(r,n,o,a){var l=new s(t(r,n,o,a));return e.isGeneratorFunction(n)?l:l.next().then(function(e){return e.done?e.value:l.next()})},l(C),C[j]="Generator",C[x]=function(){return this},C.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=g,y.prototype={constructor:y,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=w,this.done=!1,this.delegate=null,this.method="next",this.arg=w,this.tryEntries.forEach(u),!e)for(var t in this)"t"===t.charAt(0)&&f.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=w)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=w),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var l=f.call(o,"catchLoc"),s=f.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);}else if(!s)throw new Error("try statement without catch or finally");else if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1,n;0<=r;--r)if(n=this.tryEntries[r],n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1,r;0<=t;--t)if(r=this.tryEntries[t],r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),u(r),v},catch:function(e){for(var t=this.tryEntries.length-1,r;0<=t;--t)if(r=this.tryEntries[t],r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;u(r)}return o}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=w),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),Fe=Ie,Re=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){function a(e){y(s,n,o,a,l,"next",e)}function l(e){y(s,n,o,a,l,"throw",e)}var s=e.apply(t,r);a(void 0)})}},Ye=function(e,t){return e===t||e!==e&&t!==t},Ge=function(e,t){for(var r=e.length;r--;)if(Ye(e[r][0],t))return r;return-1},Je=Array.prototype,Ve=Je.splice;g.prototype.clear=function(){this.__data__=[],this.size=0},g.prototype["delete"]=function(e){var t=this.__data__,r=Ge(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():Ve.call(t,r,1),--this.size,!0},g.prototype.get=function(e){var t=this.__data__,r=Ge(t,e);return 0>r?void 0:t[r][1]},g.prototype.has=function(e){return-1<Ge(this.__data__,e)},g.prototype.set=function(e,t){var r=this.__data__,n=Ge(r,e);return 0>n?(++this.size,r.push([e,t])):r[n][1]=t,this};var Ze=g,qe="object"==c(Be)&&Be&&Be.Object===Object&&Be,$e=qe,Xe="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,Ke=$e||Xe||Function("return this")(),Qe=Ke,et=Qe.Symbol,tt=et,rt=Object.prototype,nt=rt.hasOwnProperty,ot=rt.toString,at=tt?tt.toStringTag:void 0,lt=function(e){var t=nt.call(e,at),r=e[at];try{e[at]=void 0;var n=!0}catch(t){}var o=ot.call(e);return n&&(t?e[at]=r:delete e[at]),o},st=Object.prototype,it=st.toString,ct=function(e){return it.call(e)},pt=tt?tt.toStringTag:void 0,dt=h,ut=m,yt=function(e){if(!ut(e))return!1;var t=dt(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},gt=Qe["__core-js_shared__"],ht=gt,mt=function(){var e=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ft=Function.prototype,bt=ft.toString,xt=function(e){if(null!=e){try{return bt.call(e)}catch(t){}try{return e+""}catch(t){}}return""},_t=/[\\^$.*+?()[\]{}|]/g,jt=/^\[object .+?Constructor\]$/,wt=Function.prototype,vt=Object.prototype,kt=wt.toString,St=vt.hasOwnProperty,Mt=RegExp("^"+kt.call(St).replace(_t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=function(e){if(!ut(e)||f(e))return!1;var t=yt(e)?Mt:jt;return t.test(xt(e))},Lt=function(e,t){return null==e?void 0:e[t]},Et=function(e,t){var r=Lt(e,t);return Ct(r)?r:void 0},Pt=Et(Qe,"Map"),Ot=Pt,At=Et(Object,"create"),Wt=At,Nt=Object.prototype,Tt=Nt.hasOwnProperty,zt=Object.prototype,Ut=zt.hasOwnProperty;b.prototype.clear=function(){this.__data__=Wt?Wt(null):{},this.size=0},b.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},b.prototype.get=function(e){var t=this.__data__;if(Wt){var r=t[e];return r==="__lodash_hash_undefined__"?void 0:r}return Tt.call(t,e)?t[e]:void 0},b.prototype.has=function(e){var t=this.__data__;return Wt?t[e]!==void 0:Ut.call(t,e)},b.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Wt&&void 0===t?"__lodash_hash_undefined__":t,this};var Ht=b,Dt=function(e,t){var r=e.__data__;return x(t)?r["string"==typeof t?"string":"hash"]:r.map};_.prototype.clear=function(){this.size=0,this.__data__={hash:new Ht,map:new(Ot||Ze),string:new Ht}},_.prototype["delete"]=function(e){var t=Dt(this,e)["delete"](e);return this.size-=t?1:0,t},_.prototype.get=function(e){return Dt(this,e).get(e)},_.prototype.has=function(e){return Dt(this,e).has(e)},_.prototype.set=function(e,t){var r=Dt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Bt=_;j.prototype.clear=function(){this.__data__=new Ze,this.size=0},j.prototype["delete"]=function(e){var t=this.__data__,r=t["delete"](e);return this.size=t.size,r},j.prototype.get=function(e){return this.__data__.get(e)},j.prototype.has=function(e){return this.__data__.has(e)},j.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ze){var n=r.__data__;if(!Ot||199>n.length)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Bt(n)}return r.set(e,t),this.size=r.size,this};var It=j,Ft=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!(!1===t(e[r],r,e)););return e},Rt=function(){try{var e=Et(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Yt=Rt,Gt=function(e,t,r){"__proto__"==t&&Yt?Yt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Jt=Object.prototype,Vt=Jt.hasOwnProperty,Zt=w,qt=function(e,t,r,n){var o=!r;r||(r={});for(var a=-1,l=t.length;++a<l;){var s=t[a],i=n?n(r[s],e[s],s,r,e):void 0;i===void 0&&(i=e[s]),o?Gt(r,s,i):Zt(r,s,i)}return r},$t=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Xt=v,Kt=function(e){return Xt(e)&&dt(e)=="[object Arguments]"},Qt=Object.prototype,er=Qt.hasOwnProperty,tr=Qt.propertyIsEnumerable,rr=Kt(function(){return arguments}())?Kt:function(e){return Xt(e)&&er.call(e,"callee")&&!tr.call(e,"callee")},nr=rr,or=Array.isArray,ar=or,lr=function(){return!1},sr=u(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===r,a=o?Qe.Buffer:void 0,l=a?a.isBuffer:void 0;e.exports=l||lr}),ir=/^(?:0|[1-9]\d*)$/,cr=k,pr=function(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991},dr={};dr["[object Float32Array]"]=dr["[object Float64Array]"]=dr["[object Int8Array]"]=dr["[object Int16Array]"]=dr["[object Int32Array]"]=dr["[object Uint8Array]"]=dr["[object Uint8ClampedArray]"]=dr["[object Uint16Array]"]=dr["[object Uint32Array]"]=!0,dr["[object Arguments]"]=dr["[object Array]"]=dr["[object ArrayBuffer]"]=dr["[object Boolean]"]=dr["[object DataView]"]=dr["[object Date]"]=dr["[object Error]"]=dr["[object Function]"]=dr["[object Map]"]=dr["[object Number]"]=dr["[object Object]"]=dr["[object RegExp]"]=dr["[object Set]"]=dr["[object String]"]=dr["[object WeakMap]"]=!1;var ur=function(e){return function(t){return e(t)}},yr=u(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===r,a=o&&$e.process,l=function(){try{var e=n&&n.require&&n.require("util").types;return e?e:a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=l}),gr=yr&&yr.isTypedArray,hr=gr?ur(gr):function(e){return Xt(e)&&pr(e.length)&&!!dr[dt(e)]},mr=hr,fr=Object.prototype,br=fr.hasOwnProperty,xr=function(e,t){var r=ar(e),n=!r&&nr(e),o=!r&&!n&&sr(e),a=!r&&!n&&!o&&mr(e),l=r||n||o||a,s=l?$t(e.length,String):[],i=s.length;for(var c in e)(t||br.call(e,c))&&!(l&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||cr(c,i)))&&s.push(c);return s},_r=Object.prototype,jr=function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||_r;return e===r},wr=function(e,t){return function(r){return e(t(r))}},vr=wr(Object.keys,Object),kr=Object.prototype,Sr=kr.hasOwnProperty,Mr=function(e){if(!jr(e))return vr(e);var t=[];for(var r in Object(e))Sr.call(e,r)&&"constructor"!=r&&t.push(r);return t},Cr=function(e){return null!=e&&pr(e.length)&&!yt(e)},Lr=function(e){return Cr(e)?xr(e):Mr(e)},Er=function(e,t){return e&&qt(t,Lr(t),e)},Pr=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Or=Object.prototype,Ar=Or.hasOwnProperty,Wr=function(e){if(!ut(e))return Pr(e);var t=jr(e),r=[];for(var n in e)("constructor"!=n||!t&&Ar.call(e,n))&&r.push(n);return r},Nr=function(e){return Cr(e)?xr(e,!0):Wr(e)},Tr=function(e,t){return e&&qt(t,Nr(t),e)},zr=u(function(e,t){var r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===r,a=o?Qe.Buffer:void 0,l=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=l?l(r):new e.constructor(r);return e.copy(n),n}}),Ur=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},Hr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var l=e[r];t(l,r,e)&&(a[o++]=l)}return a},Dr=function(){return[]},Br=Object.prototype,Ir=Br.propertyIsEnumerable,Fr=Object.getOwnPropertySymbols,Rr=Fr?function(e){return null==e?[]:(e=Object(e),Hr(Fr(e),function(t){return Ir.call(e,t)}))}:Dr,Yr=Rr,Gr=function(e,t){return qt(e,Yr(e),t)},Jr=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Vr=wr(Object.getPrototypeOf,Object),Zr=Vr,qr=Object.getOwnPropertySymbols,$r=qr?function(e){for(var t=[];e;)Jr(t,Yr(e)),e=Zr(e);return t}:Dr,Xr=$r,Kr=function(e,t){return qt(e,Xr(e),t)},Qr=function(e,t,r){var n=t(e);return ar(e)?n:Jr(n,r(e))},en=function(e){return Qr(e,Lr,Yr)},tn=function(e){return Qr(e,Nr,Xr)},rn=Et(Qe,"DataView"),nn=rn,on=Et(Qe,"Promise"),an=on,ln=Et(Qe,"Set"),sn=ln,cn=Et(Qe,"WeakMap"),pn=cn,dn="[object Map]",un="[object Promise]",yn="[object Set]",gn="[object WeakMap]",hn="[object DataView]",mn=xt(nn),fn=xt(Ot),bn=xt(an),xn=xt(sn),_n=xt(pn),jn=dt;(nn&&jn(new nn(new ArrayBuffer(1)))!=hn||Ot&&jn(new Ot)!=dn||an&&jn(an.resolve())!=un||sn&&jn(new sn)!=yn||pn&&jn(new pn)!=gn)&&(jn=function(e){var t=dt(e),r=t=="[object Object]"?e.constructor:void 0,n=r?xt(r):"";if(n)switch(n){case mn:return hn;case fn:return dn;case bn:return un;case xn:return yn;case _n:return gn;}return t});var wn=jn,vn=Object.prototype,kn=vn.hasOwnProperty,Sn=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&kn.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Mn=Qe.Uint8Array,Cn=Mn,Ln=function(e){var t=new e.constructor(e.byteLength);return new Cn(t).set(new Cn(e)),t},En=function(e,t){var r=t?Ln(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Pn=/\w*$/,On=function(e){var t=new e.constructor(e.source,Pn.exec(e));return t.lastIndex=e.lastIndex,t},An=tt?tt.prototype:void 0,Wn=An?An.valueOf:void 0,Nn=function(e){return Wn?Object(Wn.call(e)):{}},Tn=function(e,t){var r=t?Ln(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},zn=function(e,t,r){var n=e.constructor;return"[object ArrayBuffer]"===t?Ln(e):"[object Boolean]"===t||"[object Date]"===t?new n(+e):"[object DataView]"===t?En(e,r):"[object Float32Array]"===t||"[object Float64Array]"===t||"[object Int8Array]"===t||"[object Int16Array]"===t||"[object Int32Array]"===t||"[object Uint8Array]"===t||"[object Uint8ClampedArray]"===t||"[object Uint16Array]"===t||"[object Uint32Array]"===t?Tn(e,r):"[object Map]"===t?new n:"[object Number]"===t||"[object String]"===t?new n(e):"[object RegExp]"===t?On(e):"[object Set]"===t?new n:"[object Symbol]"===t?Nn(e):void 0},Un=Object.create,Hn=function(){function e(){}return function(t){if(!ut(t))return{};if(Un)return Un(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Dn=Hn,Bn=function(e){return"function"!=typeof e.constructor||jr(e)?{}:Dn(Zr(e))},In=yr&&yr.isMap,Fn=In?ur(In):function(e){return Xt(e)&&wn(e)=="[object Map]"},Rn=Fn,Yn=yr&&yr.isSet,Gn=Yn?ur(Yn):function(e){return Xt(e)&&wn(e)=="[object Set]"},Jn=Gn,Vn={};Vn["[object Arguments]"]=Vn["[object Array]"]=Vn["[object ArrayBuffer]"]=Vn["[object DataView]"]=Vn["[object Boolean]"]=Vn["[object Date]"]=Vn["[object Float32Array]"]=Vn["[object Float64Array]"]=Vn["[object Int8Array]"]=Vn["[object Int16Array]"]=Vn["[object Int32Array]"]=Vn["[object Map]"]=Vn["[object Number]"]=Vn["[object Object]"]=Vn["[object RegExp]"]=Vn["[object Set]"]=Vn["[object String]"]=Vn["[object Symbol]"]=Vn["[object Uint8Array]"]=Vn["[object Uint8ClampedArray]"]=Vn["[object Uint16Array]"]=Vn["[object Uint32Array]"]=!0,Vn["[object Error]"]=Vn["[object Function]"]=Vn["[object WeakMap]"]=!1;var Zn=S,qn=function(e){return Zn(e,5)},$n=function(e){return function(t,r,n){for(var o=-1,a=Object(t),l=n(t),s=l.length;s--;){var i=l[e?s:++o];if(!1===r(a[i],i,a))break}return t}}(),Xn=function(e,t){return function(r,n){if(null==r)return r;if(!Cr(r))return e(r,n);for(var o=r.length,a=t?o:-1,l=Object(r);(t?a--:++a<o)&&!(!1===n(l[a],a,l)););return r}}(function(e,t){return e&&$n(e,t,Lr)}),Kn=Xn,Qn=function(e){return e},eo=function(e){return"function"==typeof e?e:Qn},to=function(e,t){var r=ar(e)?Ft:Kn;return r(e,eo(t))},ro=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o};M.prototype.add=M.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},M.prototype.has=function(e){return this.__data__.has(e)};var no=M,oo=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},ao=function(e,t){return e.has(t)},lo=function(e,t,r,n,o,a){var l=1&r,s=e.length,i=t.length;if(s!=i&&!(l&&i>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var p=-1,d=!0,u=2&r?new no:void 0;for(a.set(e,t),a.set(t,e);++p<s;){var y=e[p],g=t[p];if(n)var h=l?n(g,y,p,t,e,a):n(y,g,p,e,t,a);if(void 0!==h){if(h)continue;d=!1;break}if(u){if(!oo(t,function(e,t){if(!ao(u,t)&&(y===e||o(y,e,r,n,a)))return u.push(t)})){d=!1;break}}else if(!(y===g||o(y,g,r,n,a))){d=!1;break}}return a["delete"](e),a["delete"](t),d},so=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},io=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},co=tt?tt.prototype:void 0,po=co?co.valueOf:void 0,uo=function(e,t,r,n,o,a,l){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!!(e.byteLength==t.byteLength&&a(new Cn(e),new Cn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ye(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=so;case"[object Set]":var i=1&n;if(s||(s=io),e.size!=t.size&&!i)return!1;var c=l.get(e);if(c)return c==t;n|=2,l.set(e,t);var p=lo(s(e),s(t),n,o,a,l);return l["delete"](e),p;case"[object Symbol]":if(po)return po.call(e)==po.call(t);}return!1},yo=Object.prototype,go=yo.hasOwnProperty,ho=Object.prototype,mo=ho.hasOwnProperty,fo=function(e,t,r,n,o,a){var l=ar(e),s=ar(t),i=l?"[object Array]":wn(e),c=s?"[object Array]":wn(t);i="[object Arguments]"==i?"[object Object]":i,c="[object Arguments]"==c?"[object Object]":c;var p="[object Object]"==i,d="[object Object]"==c,u=i==c;if(u&&sr(e)){if(!sr(t))return!1;l=!0,p=!1}if(u&&!p)return a||(a=new It),l||mr(e)?lo(e,t,r,n,o,a):uo(e,t,i,r,n,o,a);if(!(1&r)){var y=p&&mo.call(e,"__wrapped__"),g=d&&mo.call(t,"__wrapped__");if(y||g){var h=y?e.value():e,m=g?t.value():t;return a||(a=new It),o(h,m,r,n,a)}}return!!u&&(a||(a=new It),C(e,t,r,n,o,a))},bo=L,xo=function(e){return e===e&&!ut(e)},_o=function(e){for(var t=Lr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,xo(o)]}return t},jo=function(e,t){return function(r){return null!=r&&r[e]===t&&(t!==void 0||e in Object(r))}},wo=function(e){var t=_o(e);return 1==t.length&&t[0][2]?jo(t[0][0],t[0][1]):function(r){return r===e||E(r,e,t)}},vo=P,ko=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,So=/^\w*$/,Mo=O;A.Cache=Bt;var Co=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lo=/\\(\\)?/g,Eo=function(e){var t=A(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Co,function(e,r,n,o){t.push(n?o.replace(Lo,"$1"):r||e)}),t}),Po=1/0,Oo=tt?tt.prototype:void 0,Ao=Oo?Oo.toString:void 0,Wo=function(e){return null==e?"":W(e)},No=function(e,t){return ar(e)?e:Mo(e,t)?[e]:Eo(Wo(e))},To=function(e){if("string"==typeof e||vo(e))return e;var t=e+"";return"0"==t&&1/e==-(1/0)?"-0":t},zo=function(e,t){t=No(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[To(t[r++])];return r&&r==n?e:void 0},Uo=function(e,t,r){var n=null==e?void 0:zo(e,t);return n===void 0?r:n},Ho=function(e,t,r){t=No(t,e);for(var n=-1,o=t.length,a=!1,l;++n<o&&(l=To(t[n]),!!(a=null!=e&&r(e,l)));)e=e[l];return a||++n!=o?a:(o=null==e?0:e.length,!!o&&pr(o)&&cr(l,o)&&(ar(e)||nr(e)))},Do=function(e,t){return null!=e&&Ho(e,t,N)},Bo=function(e,t){return Mo(e)&&xo(t)?jo(To(e),t):function(r){var n=Uo(r,e);return n===void 0&&n===t?Do(r,e):bo(t,n,3)}},Io=function(e){return function(t){return null==t?void 0:t[e]}},Fo=function(e){return function(t){return zo(t,e)}},Ro=function(e){return Mo(e)?Io(To(e)):Fo(e)},Yo=T,Go=function(e,t){var r=-1,n=Cr(e)?Array(e.length):[];return Kn(e,function(e,o,a){n[++r]=t(e,o,a)}),n},Jo=function(e,t){var r=ar(e)?ro:Go;return r(e,Yo(t))},Vo=tt?tt.isConcatSpreadable:void 0,Zo=function(e){return ar(e)||nr(e)||!!(Vo&&e&&e[Vo])},qo=z,$o=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Jr(ar(r)?Ur(r):[r],qo(t,1))},Xo=Array.prototype,Ko=Xo.join,Qo=function(e,t){return null==e?"":Ko.call(e,t)},ea=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2]);}return e.apply(t,r)},ta=He,ra=function(e,t,r){return t=ta(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=ta(n.length-t,0),l=Array(a);++o<a;)l[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(l),ea(e,this,s)}},na=function(e){return function(){return e}},oa=Yt?function(e,t){return Yt(e,"toString",{configurable:!0,enumerable:!1,value:na(t),writable:!0})}:Qn,aa=Date.now,la=function(e){var t=0,r=0;return function(){var n=aa(),o=16-(n-r);if(r=n,!(0<o))t=0;else if(800<=++t)return arguments[0];return e.apply(void 0,arguments)}},sa=la(oa),ia=sa,ca=pn&&new pn,pa=ca,da=pa?function(e,t){return pa.set(e,t),e}:Qn,ua=da,ya=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);}var r=Dn(e.prototype),n=e.apply(r,t);return ut(n)?n:r}},ga=function(e,t,r){function n(){var t=this&&this!==Qe&&this instanceof n?a:e;return t.apply(o?r:this,arguments)}var o=t&1,a=ya(e);return n},ha=function(e,t,r,n){for(var o=-1,a=e.length,l=r.length,s=-1,i=t.length,c=He(a-l,0),p=Array(i+c),d=!n;++s<i;)p[s]=t[s];for(;++o<l;)(d||o<a)&&(p[r[o]]=e[o]);for(;c--;)p[s++]=e[o++];return p},ma=function(e,t,r,n){for(var o=-1,a=e.length,l=-1,s=r.length,i=-1,c=t.length,p=He(a-s,0),d=Array(p+c),u=!n;++o<p;)d[o]=e[o];for(var y=o;++i<c;)d[y+i]=t[i];for(;++l<s;)(u||o<a)&&(d[y+r[l]]=e[o++]);return d},fa=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n},ba=function(){};U.prototype=Dn(ba.prototype),U.prototype.constructor=U;var xa=U,_a=function(){},ja=pa?function(e){return pa.get(e)}:_a,wa=ja,va={},ka=Object.prototype,Sa=ka.hasOwnProperty,Ma=function(e){for(var t=e.name+"",r=va[t],n=Sa.call(va,t)?r.length:0;n--;){var o=r[n],a=o.func;if(null==a||a==e)return o.name}return t};H.prototype=Dn(ba.prototype),H.prototype.constructor=H;var Ca=H,La=function(e){if(e instanceof xa)return e.clone();var t=new Ca(e.__wrapped__,e.__chain__);return t.__actions__=Ur(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Ea=Object.prototype,Pa=Ea.hasOwnProperty;D.prototype=ba.prototype,D.prototype.constructor=D;var Oa=D,Aa=la(ua),Wa=Aa,Na=/\{\n\/\* \[wrapped with (.+)\] \*/,Ta=/,? & /,za=function(e){var t=e.match(Na);return t?t[1].split(Ta):[]},Ua=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ha=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(1<r?"& ":"")+t[n],t=t.join(2<r?", ":" "),e.replace(Ua,"{\n/* [wrapped with "+t+"] */\n")},Da=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1},Ba=function(e){return e!==e},Ia=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1},Fa=function(e,t,r){return t===t?Ia(e,t,r):Da(e,Ba,r)},Ra=function(e,t){var r=null==e?0:e.length;return!!r&&-1<Fa(e,t,0)},Ya=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ga=function(e,t){return Ft(Ya,function(r){var n="_."+r[0];t&r[1]&&!Ra(e,n)&&e.push(n)}),e.sort()},Ja=function(e,t,r){var n=t+"";return ia(e,Ha(n,Ga(za(n),r)))},Va=function(e,t,r,n,o,a,l,s,i,c){var p=8&t,d=p?l:void 0,u=p?void 0:l,y=p?a:void 0,g=p?void 0:a;t|=p?32:64,t&=~(p?64:32),4&t||(t&=-4);var h=[e,t,o,y,d,g,u,s,i,c],m=r.apply(void 0,h);return B(e)&&Wa(m,h),m.placeholder=n,Ja(m,e,t)},Za=function(e){return e.placeholder},qa=function(e,t){for(var r=e.length,n=Ue(t.length,r),o=Ur(e);n--;){var a=t[n];e[n]=cr(a,r)?o[a]:void 0}return e},$a=function(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var l=e[r];(l===t||l==="__lodash_placeholder__")&&(e[r]="__lodash_placeholder__",a[o++]=r)}return a},Xa=I,Ka=function(e,t,r){function n(){for(var a=arguments.length,l=Array(a),s=a,i=Za(n);s--;)l[s]=arguments[s];var c=3>a&&l[0]!==i&&l[a-1]!==i?[]:$a(l,i);if(a-=c.length,a<r)return Va(e,t,Xa,n.placeholder,void 0,l,c,void 0,void 0,r-a);var p=this&&this!==Qe&&this instanceof n?o:e;return ea(p,this,l)}var o=ya(e);return n},Qa=function(e,t,r,n){function o(){for(var t=-1,s=arguments.length,i=-1,c=n.length,p=Array(c+s),d=this&&this!==Qe&&this instanceof o?l:e;++i<c;)p[i]=n[i];for(;s--;)p[i++]=arguments[++t];return ea(d,a?r:this,p)}var a=t&1,l=ya(e);return o},el=function(e,t){var r=e[1],n=t[1],o=r|n,a=131>o,l=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!(a||l))return e;1&n&&(e[2]=t[2],o|=1&r?0:4);var s=t[3];if(s){var i=e[3];e[3]=i?ha(i,s,t[4]):s,e[4]=i?$a(e[3],"__lodash_placeholder__"):t[4]}return s=t[5],s&&(i=e[5],e[5]=i?ma(i,s,t[6]):s,e[6]=i?$a(e[5],"__lodash_placeholder__"):t[6]),s=t[7],s&&(e[7]=s),128&n&&(e[8]=null==e[8]?t[8]:Ue(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e},tl=0/0,rl=/^\s+|\s+$/g,nl=/^[-+]0x[0-9a-f]+$/i,ol=/^0b[01]+$/i,al=/^0o[0-7]+$/i,ll=parseInt,sl=function(e){if("number"==typeof e)return e;if(vo(e))return tl;if(ut(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ut(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(rl,"");var r=ol.test(e);return r||al.test(e)?ll(e.slice(2),r?2:8):nl.test(e)?tl:+e},il=1/0,cl=function(e){if(!e)return 0===e?e:0;if(e=sl(e),e===il||e===-il){var t=0>e?-1:1;return 1.7976931348623157e+308*t}return e===e?e:0},pl=function(e){var t=cl(e),r=t%1;return t===t?r?t-r:t:0},dl=He,ul=function(e,t,r,n,o,a,l,s){var i=2&t;if(!i&&"function"!=typeof e)throw new TypeError("Expected a function");var c=n?n.length:0;if(c||(t&=-97,n=o=void 0),l=void 0===l?l:dl(pl(l),0),s=void 0===s?s:pl(s),c-=o?o.length:0,64&t){var p=n,d=o;n=o=void 0}var u=i?void 0:wa(e),y=[e,t,r,n,o,p,d,a,l,s];if(u&&el(y,u),e=y[0],t=y[1],r=y[2],n=y[3],o=y[4],s=y[9]=void 0===y[9]?i?0:e.length:dl(y[9]-c,0),!s&&24&t&&(t&=-25),!t||1==t)var g=ga(e,t,r);else g=8==t||16==t?Ka(e,t,s):32!=t&&33!=t||o.length?Xa.apply(void 0,y):Qa(e,t,r,n);var h=u?ua:Wa;return Ja(h(g,y),e,t)},yl=function(e,t){return ia(ra(e,t,Qn),e+"")}(function(e,t){var r=$a(t,Za(yl));return ul(e,32,void 0,t,r)});yl.placeholder={};var gl=function(e,t){return yl(eo(t),e)},hl=function(e,t,r,n){if(!ut(e))return e;t=No(t,e);for(var o=-1,a=t.length,l=e;null!=l&&++o<a;){var s=To(t[o]),i=r;if(o!=a-1){var c=l[s];i=n?n(c,s,l):void 0,i===void 0&&(i=ut(c)?c:cr(t[o+1])?[]:{})}Zt(l,s,i),l=l[s]}return e},ml=function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var l=t[n],s=zo(e,l);r(s,l)&&hl(a,No(l,e),s)}return a},fl=function(e,t){return ml(e,t,function(t,r){return Do(e,r)})},bl=function(e){var t=null==e?0:e.length;return t?qo(e,1):[]},xl=function(e){return ia(ra(e,void 0,bl),e+"")},_l=xl(function(e,t){return null==e?{}:fl(e,t)}),jl=_l,wl=function(e){return"number"==typeof e&&e==pl(e)},vl=Qe.isFinite,kl=function(e){var t=Math[e];return function(e,r){if(e=sl(e),r=null==r?0:Ue(pl(r),292),r&&vl(e)){var n=(Wo(e)+"e").split("e"),o=t(n[0]+"e"+(+n[1]+r));return n=(Wo(o)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(e)}}("round"),Sl=kl,Ml=u(function(e,t){(function(r,n){e.exports=t=n()})(Be,function(){var e=e||function(e,t){var r=(0,eval)("this").Math.ceil,n=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},a=o.lib={},l=a.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=a.WordArray=l.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r==t?4*e.length:r},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var a=0,l;a<o;a++)l=255&r[a>>>2]>>>24-8*(a%4),t[n+a>>>2]|=l<<24-8*((n+a)%4);else for(var a=0;a<o;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-8*(t%4),e.length=r(t/4)},clone:function e(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=function(t){var t=t,r=987654321,n=4294967295;return function(){r=36969*(65535&r)+(r>>16)&4294967295,t=18e3*(65535&t)+(t>>16)&4294967295;var o=(r<<16)+t&4294967295;return o/=4294967296,o+=.5,o*(.5<e.random()?1:-1)}},r=0,a,l;r<t;r+=4)l=o(4294967296*(a||e.random())),a=987654071*l(),n.push(0|4294967296*l());return new s.init(n,t)}}),i=o.enc={},c=i.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0,a;o<r;o++)a=255&t[o>>>2]>>>24-8*(o%4),n.push((a>>>4).toString(16)),n.push((15&a).toString(16));return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new s.init(r,t/2)}},p=i.Latin1={stringify:function(e){for(var t=(0,eval)("this").String.fromCharCode,r=e.words,n=e.sigBytes,o=[],a=0,l;a<n;a++)l=255&r[a>>>2]>>>24-8*(a%4),o.push(t(l));return o.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new s.init(r,t)}},d=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},u=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,o=t.sigBytes,a=this.blockSize,l=o/(4*a);l=e?r(l):He((0|l)-this._minBufferSize,0);var i=l*a,c=Ue(4*i,o);if(i){for(var p=0;p<i;p+=a)this._doProcessBlock(n,p);var d=n.splice(0,i);t.sigBytes-=c}return new s.init(d,c)},clone:function e(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=a.Hasher=u.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}}),g=o.algo={};return o}(Math);return e})}),Cl=u(function(e,t){(function(r,n){e.exports=t=n(Ml)})(Be,function(e){return function(t){var r=e,n=r.lib,o=n.Base,a=n.WordArray,l=r.x64={},s=l.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i=l.WordArray=o.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r==t?8*e.length:r},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0,o;n<t;n++)o=e[n],r.push(o.high),r.push(o.low);return a.create(r,this.sigBytes)},clone:function e(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),e})}),Ll=u(function(e,t){(function(r,n){e.exports=t=n(Ml,Cl)})(Be,function(e){return function(){function t(){return l.create.apply(l,arguments)}var r=e,n=r.lib,o=n.Hasher,a=r.x64,l=a.Word,s=a.WordArray,i=r.algo,c=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],p=[];(function(){for(var e=0;80>e;e++)p[e]=t()})();var d=i.SHA512=o.extend({_doReset:function(){this._hash=new s.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],a=r[2],l=r[3],s=r[4],d=r[5],u=r[6],y=r[7],g=n.high,h=n.low,m=o.high,f=o.low,b=a.high,x=a.low,_=l.high,j=l.low,w=s.high,v=s.low,k=d.high,S=d.low,M=u.high,C=u.low,L=y.high,E=y.low,P=g,O=h,A=m,W=f,N=b,T=x,z=_,U=j,H=w,D=v,B=k,I=S,F=M,R=C,Y=L,G=E,J=0,V;80>J;J++){if(V=p[J],16>J)var Z=V.high=0|e[t+2*J],q=V.low=0|e[t+2*J+1];else{var $=p[J-15],X=$.high,K=$.low,Q=(K>>>1|X<<31)^(K>>>8|X<<24)^(K>>>7|X<<25),ee=p[J-2],te=ee.high,re=ee.low,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),oe=p[J-7],ae=oe.high,le=oe.low,se=p[J-16],ie=se.high,ce=se.low,q=Q+le,Z=((X>>>1|K<<31)^(X>>>8|K<<24)^X>>>7)+ae+(q>>>0<Q>>>0?1:0),q=q+ne,Z=Z+((te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6)+(q>>>0<ne>>>0?1:0),q=q+ce,Z=Z+ie+(q>>>0<ce>>>0?1:0);V.high=Z,V.low=q}var pe=H&B^~H&F,de=D&I^~D&R,ue=P&A^P&N^A&N,ye=O&W^O&T^W&T,ge=(P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7),he=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7),me=(H>>>14|D<<18)^(H>>>18|D<<14)^(H<<23|D>>>9),fe=(D>>>14|H<<18)^(D>>>18|H<<14)^(D<<23|H>>>9),be=c[J],xe=be.high,_e=be.low,je=G+fe,we=Y+me+(je>>>0<G>>>0?1:0),je=je+de,we=we+pe+(je>>>0<de>>>0?1:0),je=je+_e,we=we+xe+(je>>>0<_e>>>0?1:0),je=je+q,we=we+Z+(je>>>0<q>>>0?1:0),ve=he+ye,ke=ge+ue+(ve>>>0<he>>>0?1:0);Y=F,G=R,F=B,R=I,B=H,I=D,D=0|U+je,H=0|z+we+(D>>>0<U>>>0?1:0),z=N,U=T,N=A,T=W,A=P,W=O,O=0|je+ve,P=0|we+ke+(O>>>0<je>>>0?1:0)}h=n.low=h+O,n.high=g+P+(h>>>0<O>>>0?1:0),f=o.low=f+W,o.high=m+A+(f>>>0<W>>>0?1:0),x=a.low=x+T,a.high=b+N+(x>>>0<T>>>0?1:0),j=l.low=j+U,l.high=_+z+(j>>>0<U>>>0?1:0),v=s.low=v+D,s.high=w+H+(v>>>0<D>>>0?1:0),S=d.low=S+I,d.high=k+B+(S>>>0<I>>>0?1:0),C=u.low=C+R,u.high=M+F+(C>>>0<R>>>0?1:0),E=y.low=E+G,y.high=L+Y+(E>>>0<G>>>0?1:0)},_doFinalize:function(){var e=Math.floor,t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32,r[(o+128>>>10<<5)+30]=e(n/4294967296),r[(o+128>>>10<<5)+31]=n,t.sigBytes=4*r.length,this._process();var a=this._hash.toX32();return a},clone:function e(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});r.SHA512=o._createHelper(d),r.HmacSHA512=o._createHmacHelper(d)}(),e.SHA512})}),El=u(function(e,t){(function(r,n){e.exports=t=n(Ml)})(Be,function(e){return function(){function t(e,t,r){for(var n=[],a=0,l=0;l<t;l++)if(l%4){var s=r[e.charCodeAt(l-1)]<<2*(l%4),c=r[e.charCodeAt(l)]>>>6-2*(l%4);n[a>>>2]|=(s|c)<<24-8*(a%4),a++}return o.create(n,a)}var r=e,n=r.lib,o=n.WordArray,a=r.enc,l=a.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],a=0;a<r;a+=3)for(var l=255&t[a>>>2]>>>24-8*(a%4),s=255&t[a+1>>>2]>>>24-8*((a+1)%4),c=255&t[a+2>>>2]>>>24-8*((a+2)%4),p=0;4>p&&a+.75*p<r;p++)o.push(n.charAt(63&(l<<16|s<<8|c)>>>6*(3-p)));var d=n.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var r=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<n.length;a++)o[n.charCodeAt(a)]=a}var l=n.charAt(64);if(l){var s=e.indexOf(l);-1!==s&&(r=s)}return t(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})}),Pl=u(function(e,t){(function(r,n){e.exports=t=n(Ml)})(Be,function(e){return e.enc.Hex})}),Ol=function(e){return!0===e||!1===e||Xt(e)&&dt(e)=="[object Boolean]"},Al=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1},Wl=sn&&1/io(new sn([,-0]))[1]==1/0?function(e){return new sn(e)}:_a,Nl=function(e,t,r){var n=-1,o=Ra,a=e.length,l=!0,s=[],i=s;if(r)l=!1,o=Al;else if(a>=200){var c=t?null:Wl(e);if(c)return io(c);l=!1,o=ao,i=new no}else i=t?[]:s;outer:for(;++n<a;){var p=e[n],d=t?t(p):p;if(p=r||0!==p?p:0,l&&d===d){for(var u=i.length;u--;)if(i[u]===d)continue outer;t&&i.push(d),s.push(p)}else o(i,d,r)||(i!==s&&i.push(d),s.push(p))}return s},Tl=function(e,t){return e&&e.length?Nl(e,Yo(t)):[]},zl=function(e,t){return bo(e,t)},Ul=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Hl=function(e,t,r){var n=-1,o=e.length;0>t&&(t=-t>o?0:o+t),r=r>o?o:r,0>r&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a},Dl=function(e,t){return 2>t.length?e:zo(e,Hl(t,0,-1))},Bl=function(e,t){return t=No(t,e),e=Dl(e,t),null==e||delete e[To(Ul(t))]},Il=Function.prototype,Fl=Object.prototype,Rl=Il.toString,Yl=Fl.hasOwnProperty,Gl=Rl.call(Object),Jl=function(e){if(!Xt(e)||dt(e)!="[object Object]")return!1;var t=Zr(e);if(null===t)return!0;var r=Yl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Rl.call(r)==Gl},Vl=function(e){return Jl(e)?void 0:e},Zl=xl(function(e,t){var r={};if(null==e)return r;var n=!1;t=ro(t,function(t){return t=No(t,e),n||(n=1<t.length),t}),qt(e,tn(e),r),n&&(r=Zn(r,1|2|4,Vl));for(var o=t.length;o--;)Bl(r,t[o]);return r}),ql=Zl,$l=function(e,t,r){var o=null==e?0:e.length;return o?(t=r||void 0===t?1:pl(t),Hl(e,0>t?0:t,o)):[]},Xl={roleSystem:"system",roleGeneral:"general"},Kl={activeYes:"yes",activeNo:"no"},Ql=["<",">"];return ze});
//# sourceMappingURL=w-user-server.umd.js.map
